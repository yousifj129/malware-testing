import os
import glob
from cryptography.fernet import Fernet

# Generate a key
key = Fernet.generate_key()

# Save the key to a file
with open('key.key', 'wb') as key_file:
    key_file.write(key)

# Load the key
with open('key.key', 'rb') as key_file:
    key = key_file.read()

# Encrypt all files in the current directory
for filename in glob.glob('*'):
    if os.path.isfile(filename) and filename != 'decrypt_files.py' and filename != 'encrypt_files.py' and filename != 'key.key':
        with open(filename, 'rb') as file:
            data = file.read()
        f = Fernet(key)
        encrypted_data = f.encrypt(data)
        with open(filename, 'wb') as file:
            file.write(encrypted_data)